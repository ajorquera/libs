(function(r,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(r=typeof globalThis<"u"?globalThis:r||self,c(r.utils={}))})(this,function(r){"use strict";var $=Object.defineProperty;var J=(r,c,a)=>c in r?$(r,c,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[c]=a;var l=(r,c,a)=>J(r,typeof c!="symbol"?c+"":c,a);function c(...t){return e=>t.reduce((n,o)=>o(n),e)}const a=(t,e)=>n=>(e.forEach(o=>{(n[t]??n[o])!==void 0&&(n[t]=n[t]??n[o])}),n),b=t=>{const e={};for(const n in t)t[n]!==void 0&&(e[n]=t[n]);return e},v=t=>e=>{const n={...e};return t.forEach(o=>delete n[o]),n},E=(t,e=process.env)=>{const n=t.filter(o=>!e[o]);if(n.length>0)throw new Error(`Missing environment variables: ${n.join(", ")}`)},O=(t,e)=>t.replace(/\$\{([^}]+)\}/g,(n,o)=>{const s=e[o.trim()];return s!==void 0?s:""}),p=async t=>{if(!t.ok){let e;try{e=await t.json()}catch{throw t}throw e||t}return t},m=async t=>{let e;try{e=await t.json()}catch{e={}}return e},g=(t,e)=>t?(typeof e=="object"?Object.entries(e).reduce((o,[s,i])=>o.replace(`:${s}`,i===void 0?"":i),t):t).replace(/\/:[^/]+/g,""):"",P=t=>!!t&&Object.keys(t).length===0,y=(t,e,n)=>{const o=n?`${n}${t}`:t,s=g(o,e);let i;try{i=new URL(s)}catch{i=new URL(s,window.location.origin)}if(!P(e)){const h=U(o,e),f=new URLSearchParams(h);i.search=f.toString()}return i.toString()},U=(t,e)=>Object.entries(e??{}).reduce((o,[s,i])=>(t.includes(`:${s}`)||(o[s]=i),o),{}),d=({url:t,urlParams:e,baseUrl:n,...o})=>{const s=y(t,e,n),{body:i,method:h,headers:f}=o;return fetch(s,{body:typeof i!="string"?JSON.stringify(i):i,headers:{...f,"Content-Type":"application/json"},method:h}).then(p).then(m)},j=t=>d({...t,method:"GET"}),w=t=>d({...t,method:"POST"}),T=t=>d({...t,method:"PUT"}),S=t=>d({...t,method:"DELETE"});class u{constructor(e){l(this,"read",this.get);l(this,"create",this.post);l(this,"update",this.put);l(this,"remove",this.delete);this.config=e,this.config=e??{url:""}}get(e,n){const o=Object.assign({},this.config,n,{method:"GET",urlParams:e});return d(o)}post(e,n,o){const s=Object.assign({},this.config,o,{method:"POST",body:JSON.stringify(e),urlParams:n});return d(s)}put(e,n,o){const s=Object.assign({},this.config,o,{method:"PUT",body:JSON.stringify(e),urlParams:n});return d(s)}delete(e,n){const o=Object.assign({},this.config,n,{method:"DELETE",urlParams:e});return d(o)}}class _{constructor(e=[],n){l(this,"_endpoints");this._endpoints=new Map(e.map(o=>{const{name:s,...i}=o,h=Object.assign({},i,n);return[s,new u(h)]}))}add(e,n){const o=new u(n);this._endpoints.set(e,o)}remove(e){this._endpoints.delete(e)}get(e){return this._endpoints.get(e)}}r.Endpoint=u,r.RestApi=_,r.buildUrl=y,r.checkEnvVars=E,r.del=S,r.fetcher=d,r.get=j,r.getStrTemplate=O,r.handleError=p,r.handleJson=m,r.pipe=c,r.post=w,r.put=T,r.removeProps=v,r.removeUndefined=b,r.replaceUrlParams=g,r.setPropValueFromPriority=a,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
