(function(o,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(o=typeof globalThis<"u"?globalThis:o||self,c(o.utils={}))})(this,function(o){"use strict";var _=Object.defineProperty;var J=(o,c,l)=>c in o?_(o,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[c]=l;var h=(o,c,l)=>J(o,typeof c!="symbol"?c+"":c,l);function c(...t){return e=>t.reduce((n,r)=>r(n),e)}const l=(t,e)=>n=>(e.forEach(r=>{(n[t]??n[r])!==void 0&&(n[t]=n[t]??n[r])}),n),b=t=>{const e={};for(const n in t)t[n]!==void 0&&(e[n]=t[n]);return e},v=t=>e=>{const n={...e};return t.forEach(r=>delete n[r]),n},E=(t,e=process.env)=>{const n=t.filter(r=>!e[r]);if(n.length>0)throw new Error(`Missing environment variables: ${n.join(", ")}`)},O=(t,e,n={replace:!0})=>t.replace(/\$\{([^}]+)\}/g,(r,s)=>{const i=s.trim(),d=e[i];return d!==void 0?d:n!=null&&n.replace?"":`\${${i}}`}),m=async t=>{if(!t.ok){let e;try{e=await t.json()}catch{throw t}throw e||t}return t},g=async t=>{let e;try{e=await t.json()}catch{e={}}return e},p=(t,e)=>t?(typeof e=="object"?Object.entries(e).reduce((r,[s,i])=>r.replace(`:${s}`,i===void 0?"":i),t):t).replace(/\/:[^/]+/g,""):"",P=t=>!!t&&Object.keys(t).length===0,y=(t,e,n)=>{const r=n?`${n}${t}`:t,s=p(r,e);let i;try{i=new URL(s)}catch{i=new URL(s,window.location.origin)}if(!P(e)){const d=U(r,e),f=new URLSearchParams(d);i.search=f.toString()}return i.toString()},U=(t,e)=>Object.entries(e??{}).reduce((r,[s,i])=>(t.includes(`:${s}`)||(r[s]=i),r),{}),a=({url:t,urlParams:e,baseUrl:n,...r})=>{const s=y(t,e,n),{body:i,method:d,headers:f}=r;return fetch(s,{body:typeof i!="string"?JSON.stringify(i):i,headers:{...f,"Content-Type":"application/json"},method:d}).then(m).then(g)},j=t=>a({...t,method:"GET"}),w=t=>a({...t,method:"POST"}),T=t=>a({...t,method:"PUT"}),S=t=>a({...t,method:"DELETE"});class u{constructor(e){h(this,"read",this.get);h(this,"create",this.post);h(this,"update",this.put);h(this,"remove",this.delete);this.config=e,this.config=e??{url:""}}get(e,n){const r=Object.assign({},this.config,n,{method:"GET",urlParams:e});return a(r)}post(e,n,r){const s=Object.assign({},this.config,r,{method:"POST",body:JSON.stringify(e),urlParams:n});return a(s)}put(e,n,r){const s=Object.assign({},this.config,r,{method:"PUT",body:JSON.stringify(e),urlParams:n});return a(s)}delete(e,n){const r=Object.assign({},this.config,n,{method:"DELETE",urlParams:e});return a(r)}}class ${constructor(e=[],n){h(this,"_endpoints");this._endpoints=new Map(e.map(r=>{const{name:s,...i}=r,d=Object.assign({},i,n);return[s,new u(d)]}))}add(e,n){const r=new u(n);this._endpoints.set(e,r)}remove(e){this._endpoints.delete(e)}get(e){return this._endpoints.get(e)}}o.Endpoint=u,o.RestApi=$,o.buildUrl=y,o.checkEnvVars=E,o.del=S,o.fetcher=a,o.get=j,o.getStrTemplate=O,o.handleError=m,o.handleJson=g,o.pipe=c,o.post=w,o.put=T,o.removeProps=v,o.removeUndefined=b,o.replaceUrlParams=p,o.setPropValueFromPriority=l,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
