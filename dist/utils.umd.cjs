(function(o,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(o=typeof globalThis<"u"?globalThis:o||self,c(o.utils={}))})(this,function(o){"use strict";var J=Object.defineProperty;var L=(o,c,l)=>c in o?J(o,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[c]=l;var u=(o,c,l)=>L(o,typeof c!="symbol"?c+"":c,l);function c(...e){return t=>e.reduce((n,r)=>r(n),t)}const l=(e,t)=>n=>(t.forEach(r=>{(n[e]??n[r])!==void 0&&(n[e]=n[e]??n[r])}),n),b=e=>{const t={};for(const n in e)e[n]!==void 0&&(t[n]=e[n]);return t},v=e=>t=>{const n={...t};return e.forEach(r=>delete n[r]),n},E=(e,t=process.env)=>{const n=e.filter(r=>!t[r]);if(n.length>0)throw new Error(`Missing environment variables: ${n.join(", ")}`)},O=(e,t,n={replace:!0})=>e.replace(/\$\{([^}]+)\}/g,(r,i)=>{const s=i.trim(),d=t[s];return d!==void 0?d:n!=null&&n.replace?"":`\${${s}}`}),P=e=>typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1),p=async e=>{if(!e.ok){let t;try{t=await e.json()}catch{throw e}throw t||e}return e},m=async e=>{let t;try{t=await e.json()}catch{t={}}return t},g=(e,t)=>e?(typeof t=="object"?Object.entries(t).reduce((r,[i,s])=>r.replace(`:${i}`,s===void 0?"":s),e):e).replace(/\/:[^/]+/g,""):"",U=e=>!!e&&Object.keys(e).length===0,y=(e,t,n)=>{const r=n?`${n}${e}`:e,i=g(r,t);let s;try{s=new URL(i)}catch{s=new URL(i,window.location.origin)}if(!U(t)){const d=j(r,t),f=new URLSearchParams(d);s.search=f.toString()}return s.toString()},j=(e,t)=>Object.entries(t??{}).reduce((r,[i,s])=>(e.includes(`:${i}`)||(r[i]=s),r),{}),a=({url:e,urlParams:t,baseUrl:n,...r})=>{const i=y(e,t,n),{body:s,method:d,headers:f}=r;return fetch(i,{body:typeof s!="string"?JSON.stringify(s):s,headers:{...f,"Content-Type":"application/json"},method:d}).then(p).then(m)},w=e=>a({...e,method:"GET"}),T=e=>a({...e,method:"POST"}),S=e=>a({...e,method:"PUT"}),$=e=>a({...e,method:"DELETE"});class h{constructor(t){u(this,"read",this.get);u(this,"create",this.post);u(this,"update",this.put);u(this,"remove",this.delete);this.config=t,this.config=t??{url:""}}get(t,n){const r=Object.assign({},this.config,n,{method:"GET",urlParams:t});return a(r)}post(t,n,r){const i=Object.assign({},this.config,r,{method:"POST",body:JSON.stringify(t),urlParams:n});return a(i)}put(t,n,r){const i=Object.assign({},this.config,r,{method:"PUT",body:JSON.stringify(t),urlParams:n});return a(i)}delete(t,n){const r=Object.assign({},this.config,n,{method:"DELETE",urlParams:t});return a(r)}}class _{constructor(t=[],n){u(this,"_endpoints");this._endpoints=new Map(t.map(r=>{const{name:i,...s}=r,d=Object.assign({},s,n);return[i,new h(d)]}))}add(t,n){const r=new h(n);this._endpoints.set(t,r)}remove(t){this._endpoints.delete(t)}get(t){return this._endpoints.get(t)}}o.Endpoint=h,o.RestApi=_,o.buildUrl=y,o.capitalize=P,o.checkEnvVars=E,o.del=$,o.fetcher=a,o.get=w,o.getStrTemplate=O,o.handleError=p,o.handleJson=m,o.pipe=c,o.post=T,o.put=S,o.removeProps=v,o.removeUndefined=b,o.replaceUrlParams=g,o.setPropValueFromPriority=l,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
