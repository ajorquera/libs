(function(s,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(s=typeof globalThis<"u"?globalThis:s||self,c(s.RestApi={}))})(this,function(s){"use strict";var j=Object.defineProperty;var O=(s,c,d)=>c in s?j(s,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[c]=d;var a=(s,c,d)=>O(s,typeof c!="symbol"?c+"":c,d);const c=async e=>{if(!e.ok){let t;try{t=await e.json()}catch{throw e}throw t||e}return e},d=async e=>{let t;try{t=await e.json()}catch{t={}}return t},f=(e,t)=>e?(typeof t=="object"?Object.entries(t).reduce((n,[r,i])=>n.replace(`:${r}`,i===void 0?"":i),e):e).replace(/\/:[^/]+/g,""):"",m=e=>!!e&&Object.keys(e).length===0,g=(e,t,o)=>{const n=o?`${o}${e}`:e,r=f(n,t);let i;try{i=new URL(r)}catch{i=new URL(r,window.location.origin)}if(!m(t)){const h=y(n,t),u=new URLSearchParams(h);i.search=u.toString()}return i.toString()},y=(e,t)=>Object.entries(t??{}).reduce((n,[r,i])=>(e.includes(`:${r}`)||(n[r]=i),n),{}),l=({url:e,urlParams:t,baseUrl:o,...n})=>{const r=g(e,t,o),{body:i,method:h,headers:u}=n;return fetch(r,{body:typeof i!="string"?JSON.stringify(i):i,headers:{...u,"Content-Type":"application/json"},method:h}).then(c).then(d)};class p{constructor(t){a(this,"read",this.get);a(this,"create",this.post);a(this,"update",this.put);a(this,"remove",this.delete);this.config=t,this.config=t??{url:""}}get(t,o){const n=Object.assign({},this.config,o,{method:"GET",urlParams:t});return l(n)}post(t,o,n){const r=Object.assign({},this.config,n,{method:"POST",body:JSON.stringify(t),urlParams:o});return l(r)}put(t,o,n){const r=Object.assign({},this.config,n,{method:"PUT",body:JSON.stringify(t),urlParams:o});return l(r)}delete(t,o){const n=Object.assign({},this.config,o,{method:"DELETE",urlParams:t});return l(n)}}class b{constructor(t=[],o){a(this,"_endpoints");this._endpoints=new Map(t.map(n=>{const{name:r,...i}=n,h=Object.assign({},i,o);return[r,new p(h)]}))}add(t,o){const n=new p(o);this._endpoints.set(t,n)}remove(t){this._endpoints.delete(t)}get(t){return this._endpoints.get(t)}}s.Endpoint=p,s.buildUrl=g,s.default=b,s.fetcher=l,s.handleError=c,s.handleJson=d,s.replaceUrlParams=f,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
