(function(n,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(n=typeof globalThis<"u"?globalThis:n||self,c(n.RestApi={}))})(this,function(n){"use strict";var w=Object.defineProperty;var T=(n,c,a)=>c in n?w(n,c,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[c]=a;var h=(n,c,a)=>T(n,typeof c!="symbol"?c+"":c,a);const c=async e=>{if(!e.ok){let t;try{t=await e.json()}catch{throw e}throw t||e}return e},a=async e=>{let t;try{t=await e.json()}catch{t={}}return t},f=(e,t)=>e?(typeof t=="object"?Object.entries(t).reduce((s,[r,i])=>s.replace(`:${r}`,i===void 0?"":i),e):e).replace(/\/:[^/]+/g,""):"",m=e=>!!e&&Object.keys(e).length===0,g=(e,t,o)=>{const s=o?`${o}${e}`:e,r=f(s,t);let i;try{i=new URL(r)}catch{i=new URL(r,window.location.origin)}if(!m(t)){const l=y(s,t),u=new URLSearchParams(l);i.search=u.toString()}return i.toString()},y=(e,t)=>Object.entries(t??{}).reduce((s,[r,i])=>(e.includes(`:${r}`)||(s[r]=i),s),{}),d=({url:e,urlParams:t,baseUrl:o,...s})=>{const r=g(e,t,o),{body:i,method:l,headers:u}=s;return fetch(r,{body:typeof i!="string"?JSON.stringify(i):i,headers:{...u,"Content-Type":"application/json"},method:l}).then(c).then(a)},b=e=>d({...e,method:"GET"}),O=e=>d({...e,method:"POST"}),j=e=>d({...e,method:"PUT"}),U=e=>d({...e,method:"DELETE"});class p{constructor(t){h(this,"read",this.get);h(this,"create",this.post);h(this,"update",this.put);h(this,"remove",this.delete);this.config=t,this.config=t??{url:""}}get(t,o){const s=Object.assign({},this.config,o,{method:"GET",urlParams:t});return d(s)}post(t,o,s){const r=Object.assign({},this.config,s,{method:"POST",body:JSON.stringify(t),urlParams:o});return d(r)}put(t,o,s){const r=Object.assign({},this.config,s,{method:"PUT",body:JSON.stringify(t),urlParams:o});return d(r)}delete(t,o){const s=Object.assign({},this.config,o,{method:"DELETE",urlParams:t});return d(s)}}class E{constructor(t=[],o){h(this,"_endpoints");this._endpoints=new Map(t.map(s=>{const{name:r,...i}=s,l=Object.assign({},i,o);return[r,new p(l)]}))}add(t,o){const s=new p(o);this._endpoints.set(t,s)}remove(t){this._endpoints.delete(t)}get(t){return this._endpoints.get(t)}}n.Endpoint=p,n.buildUrl=g,n.default=E,n.del=U,n.fetcher=d,n.get=b,n.handleError=c,n.handleJson=a,n.post=O,n.put=j,n.replaceUrlParams=f,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
